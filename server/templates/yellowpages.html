{% extends "base.html" %}

{% block title %}Yellow Pages - Hyperindex{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', path='yellowpages.css') }}">
{% endblock %}

{% block body_class %}theme-yellowpages{% endblock %}

{% block content %}
  <h1>Hyperindex Yellowpages</h1>

  <section aria-labelledby="search-entries">
    <h2 id="search-entries" class="sr-only">Search Entries</h2>
    {% include "partials/_filter_form.html" with context %}
    {% from "macros/filters.html" import render_filters %}
    {{ render_filters(query, tag, total, page, total_pages, "/") }}
  </section>

  {% if query is not defined or not query %}
    <p>Showing <strong>{{ entries|length }}</strong> of <strong>{{ total }}</strong> entries
      (page {{ page }} of {{ total_pages }})</p>
  {% endif %}

  {% if entries %}
    {% for entry in entries %}
      {% set card_index = loop.index %}
      {% set tag_prefix = '/?tag=' %}
      {% set show_actions = False %}
      {% include "partials/_entry_card.html" %}
    {% endfor %}
  {% else %}
    <div class="empty-state" role="note">
      <p>No entries found.</p>
      <p>Try a different search or clear filters.</p>
    </div>
  {% endif %}

  {% include "partials/_pagination.html" with context %}
{% endblock %}
