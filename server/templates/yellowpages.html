{% extends "base.html" %}

{% block title %}Yellow Pages - Hyperindex{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="/static/yellowpages.css">
{% endblock %}

{% block content %}
  <h1>Hyperindex Yellowpages</h1>

  <section>
    <h2 class="sr-only">Search Entries</h2>
    <form method="get" action="/" role="search">
      <label for="q" class="sr-only">Search</label>
      <input id="q" type="text" name="q" value="{{ query or '' }}" placeholder="Search entries...">
      <button type="submit">Search</button>
      {% if query %}
      <a href="/" class="clear-btn">Clear</a>
      {% endif %}
    </form>
  </section>

  {% if tag %}
  <p>Filtering by tag: <strong>{{ tag }}</strong> â€”
    <a href="/">Clear Filter</a>
  </p>
  {% endif %}

  {% if query %}
  <p><strong>{{ entries|length }}</strong> results for <em>"{{ query }}"</em> (page {{ page }} of {{ total_pages }})</p>
  {% else %}
  <p>Showing <strong>{{ entries|length }}</strong> of <strong>{{ total }}</strong> entries (page {{ page }} of {{ total_pages }})</p>
  {% endif %}

  {% for entry in entries %}
    {% include "partials/entry_card.html" with context %}
  {% else %}
    <p>No entries found.</p>
  {% endfor %}

  {% include "partials/pagination.html" with context %}
{% endblock %}